<app-header></app-header>

<div class="login d-flex justify-content-center align-items-center pt-1">
  <div class="login__banner">
    <img src="assets/images/logins.svg" alt="logo" width="100%" />
  </div>
  <div class="login__form">
    <div class="p-4">
      <div class="login_card card relative">
        <!--<div class="btn-group">
                    <button class="btn-blue" [class.active]="activeForm === 'login'" (click)="switchForm('login')">
                        Ingresar
                    </button>
                    <button class="btn-red" [class.active]="activeForm === 'register'" (click)="switchForm('register')">
                        Solicitar Registro
                    </button>
                </div>-->

        <div class="p-4 form-content" *ngIf="activeForm === 'login'">
          <div class="text-center mt-1">
            <img src="assets/images/logo-proyecto.png" alt="logo" class="logo_dremo" />
          </div>
          <div class="text-center mb-4 mt-2 text-sm">
            Ingrese su <b>Usuario</b> y <b>Contraseña.</b><br />
            (si no lo tiene, solicite uno en el Registro)
          </div>

          <form class="flex flex-column mt-1" [formGroup]="formLogin">
            <div class="mb-3 flex flex-column gap-2 mt-2">
              <input
                type="text"
                pInputText
                placeholder="Usuario"
                name="usuario"
                formControlName="user"
              />
            </div>

            <div class="mb-5 flex flex-column gap-2 mt-2">
              <div class="flex">
                <input
                  pInputText
                  [type]="!showPassword ? 'password' : 'text'"
                  class="flex-1 border-noround-right w-full"
                  [placeholder]="!showPassword ? 'Contraseña' : ''"
                  formControlName="pass"
                />
                <button
                  class="p-button-outlined p-button-secondary border-noround-left"
                  type="button"
                  pButton
                  (click)="showPassword = !showPassword"
                >
                  @if (showPassword) {
                    <i class="pi pi-eye"></i>
                  } @else {
                    <i class="pi pi-eye-slash"></i>
                  }
                </button>
              </div>
            </div>
            <p class="small text-center">
              <p-button class="text-primary" (onClick)="showModal = true" [text]="true"
                >¿Has olvidado tu contraseña?</p-button
              >
              <p-button class="text-primary" (onClick)="mostrarAnuncio = true" [text]="true"
                >Contactar con soporte</p-button
              >
            </p>

            <button
              pButton
              class="btn-submit"
              severity="success"
              size="small"
              label="Iniciar Sesión"
              [loading]="loading"
              (click)="onSubmit()"
              [disabled]="this.formLogin.invalid"
            ></button>
          </form>
        </div>

        <!--<div class="p-4" *ngIf="activeForm === 'register'">
                    <div class="text-center mt-1">
                        <img src="assets/images/logo-proyecto.png" alt="logo" class="logo_dremo" />
                    </div>
                    <div class="text-center mb-4 mt-2 text-sm">
                        Registra tus datos para solicitar el <strong>ingreso a la Plataforma</strong>
                    </div>

                    <form class="flex flex-column mt-1" [formGroup]="formRegistro">
                        <div class="mb-3 flex flex-column gap-2 mt-2">
                            <input type="text" pInputText placeholder="DNI / CE" formControlName="cDocumento" />
                        </div>
                        <div class="mb-3 flex flex-column gap-2 mt-2">
                            <input type="text" pInputText placeholder="Apellidos" formControlName="cApellidos" />
                        </div>
                        <div class="mb-3 flex flex-column gap-2 mt-2">
                            <input type="text" pInputText placeholder="Nombres" formControlName="cNombres" />
                        </div>
                        <div class="mb-3 flex flex-column gap-2 mt-2">
                            <input type="text" pInputText placeholder="Cód. Modular I.E."
                                formControlName="cCodigoModular" />
                        </div>
                        <div class="mb-3 flex flex-column gap-2 mt-2">
                            <input type="text" pInputText placeholder="Cargo" formControlName="cCargo" />
                        </div>
                        <div class="mb-5 flex flex-column gap-2 mt-2">
                            <input type="text" pInputText placeholder="Correo electrónico" formControlName="cCorreo" />
                        </div>
                        <div class="mb-5 flex flex-column gap-2 mt-2">
                            <textarea pInputTextarea rows="3" placeholder="Motivo para solicitar registro (opcional)"
                                formControlName="cComentarios"></textarea>
                        </div>

                        <button pButton class="btn-submit" severity="success" size="small" label="Solicitar"
                            [loading]="solicitandoRegistroUsuario" [disabled]="this.formRegistro.invalid"
                            (click)="solicitarRegistroUsuario()"></button>
                        <p class="mb-3 font-light">
                            <small>Se te notificará al correo ingresado cuando tu cuenta haya sido creada.</small>
                        </p>
                    </form>
                </div>-->
      </div>
    </div>
  </div>
</div>
<app-recover-password [showModal]="showModal" (accionBtnItem)="accionBtnItem($event)">
</app-recover-password>

<app-sin-rol-asignado [visible]="modalSinRolVisible" (visibleChange)="modalSinRolVisible = $event">
</app-sin-rol-asignado>
<p-toast />

<p-dialog
  [header]="'Información de Soporte'"
  [(visible)]="mostrarAnuncio"
  [maximizable]="true"
  [modal]="true"
  [closable]="true"
  [style]="{ width: '80vw' }"
  styleClass="dialog-con-header-normal"
>
  <div class="content-grid">
    <!-- Video lado izquierdo -->
    <div class="video-section">
      <div class="video-container">
        <iframe
          [src]="
            sanitizer.bypassSecurityTrustResourceUrl('https://www.youtube.com/embed/WMmiaV7lJJw')
          "
          frameborder="0"
          allowfullscreen
        ></iframe>
      </div>
    </div>

    <!-- Documentación lado derecho -->
    <div class="doc-section">
      <h3>📄 Documentación</h3>
      <p>Consulta los manuales y guías rápidas aquí:</p>
      <ul>
        <li>
          <a
            href="https://drive.google.com/file/d/10oSCdI5CZbLxHaQhRRTrumFLuTE2-BYG/view?usp=drive_link"
            target="_blank"
            rel="noopener"
          >
            👉 Configurar hora de exámen ERE
          </a>
        </li>
        <!-- Añade más manuales si deseas -->
      </ul>
      <ul>
        <li>
          <a
            href="https://drive.google.com/file/d/1aDUDtom3XQcIbKy_PcM17dFChplm4YfQ/view?usp=drive_link"
            target="_blank"
            rel="noopener"
          >
            👉 Rendir Exámen ERE
          </a>
        </li>
        <!-- Añade más manuales si deseas -->
      </ul>
      <ul>
        <li>
          <a
            href="https://www.youtube.com/@ProyectoVirtualDREMO/playlists"
            target="_blank"
            rel="noopener"
          >
            👉 Videos Tutoriales
          </a>
        </li>
        <!-- Añade más manuales si deseas -->
      </ul>

      <br />
      <br />
      <br />
      <br />
      <h3>📄 Contactos para soporte</h3>
      <div style="text-align: center">Atención en horario de oficina DREMO</div>
      <ul>
        <li>👉 Wilmar Garibaldi Valdez(ERE) 953653788</li>
        <li>👉 Daniel Catachura Palacios 966635379</li>
        <li>👉 Maria Ramirez Chipana 995252993</li>
        <li>👉 Fernando Flores Coayla 942493488</li>
        <li>👉 Nicolle Puma Zapata 916106180</li>
        <li>👉 Alvaro Fernandez Flores 940892689</li>
      </ul>
    </div>
  </div>
</p-dialog>
