<!-- <app-container-page title="Cursos" [actions]="accionesCursos" (accionBtnItem)="accionBtnItem($event)"> -->
<app-container-page
  title="Lista de competencias"
  [actions]="accionesCompetencias"
  (accionBtnItem)="accionBtnItem($event)"
>
  <div class="grid">
    <div class="col-12 mt-3">
      @if (competencias.length > 0) {
        <app-table-primeng
          class="w-full"
          [columnas]="competenciasColumns"
          [data]="competencias"
          [actions]="accionesTablacompetencias"
          (accionBtnItem)="accionBtnItem($event)"
          [searchPlaceholder]="'Buscar por competencia...'"
        />
      } @else {
        <app-no-data
          [showIcon]="'NO-DATA'"
          mensaje="No se encontraron áreas curriculares asignadas"
        />
      }
    </div>
  </div>
</app-container-page>
<p-dialog
  header="{{ titulo }}"
  [(visible)]="visible_competencia"
  [modal]="true"
  [maximizable]="true"
  [resizable]="false"
  appendTo="body"
  (onHide)="(false)"
  [style]="{ width: '75rem' }"
>
  <!-- CONTENIDO DEL DIALOG -->
  <ng-template pTemplate="content">
    <p-tabView>
      <p-tabPanel header="Información de competencias">
        <app-container-page title="Competencias" [actions]="[]">
          <form [formGroup]="formCompetencia" class="flex flex-column gap-3 w-full">
            <div class="grid">
              <div class="field col-12 md:col-2">
                <br />
                <span class="p-float-label w-full">
                  <p-inputNumber
                    inputId="cCompetenciaNro"
                    [min]="1"
                    formControlName="cCompetenciaNro"
                    inputStyleClass="w-full"
                    [showButtons]="true"
                  ></p-inputNumber>
                  <label for="cCompetenciaNro">N°</label>
                </span>
              </div>
              <div class="field col-12 md:col-8">
                <span class="p-float-label w-full">
                  <input
                    pInputText
                    id="cCompetenciaNombre"
                    formControlName="cCompetenciaNombre"
                    class="w-full"
                  />
                  <label for="cCompetenciaNombre">Nombre</label>
                </span>
              </div>
              <div class="field col-12 md:col-2">
                <p-toggleButton
                  styleClass="w-full"
                  onLabel="Activo"
                  offLabel="Inactivo"
                  formControlName="iEstado"
                />
              </div>
            </div>

            <div class="grid">
              <div class="field col-12 md:col-10">
                <span class="p-float-label w-full">
                  <textarea
                    pInputTextarea
                    id="cCompetenciaDescripcion"
                    class="w-full"
                    formControlName="cCompetenciaDescripcion"
                    rows="5"
                  ></textarea>
                  <label for="cCompetenciaDescripcion">Descripción</label>
                </span>
              </div>
              <div class="field col-12 md:col-2">
                <span class="p-float-label">
                  <button
                    pButton
                    label="Editar"
                    icon="pi pi-pencil"
                    class="p-button-warning w-full"
                    size="small"
                    [disabled]="formCompetencia.invalid"
                    (click)="
                      accionBtnItem({
                        accion: 'actualizar_competencia',
                        item: formCompetencia.value,
                      })
                    "
                    *ngIf="bUpdate"
                  ></button>
                  <button
                    pButton
                    label="Guardar"
                    icon="pi pi-save"
                    class="p-button-success w-full"
                    size="small"
                    (click)="
                      accionBtnItem({ accion: 'agregar_competencia', item: formCompetencia.value })
                    "
                    *ngIf="!bUpdate"
                    [disabled]="formCompetencia.invalid"
                  ></button>
                </span>
              </div>
            </div>
          </form>
        </app-container-page>
      </p-tabPanel>

      <p-tabPanel header="Capacidades asignadas" *ngIf="iCompetenciaId > 0">
        <div *ngIf="iCompetenciaId === 0">
          <app-no-data [showIcon]="'NO-DATA'" mensaje="No se encontraron competencias asignadas" />
        </div>
        <div *ngIf="iCompetenciaId > 0">
          <app-curricula-competencia-capacidades
            [iCompetenciaId]="iCompetenciaId"
          ></app-curricula-competencia-capacidades>
        </div>
      </p-tabPanel>
    </p-tabView>
  </ng-template>
  <!-- PIE DEL DIALOG -->
  <ng-template pTemplate="footer">
    <div class="flex justify-content-end gap-2">
      <button
        pButton
        label="Cancelar"
        icon="pi pi-times"
        class="p-button-danger"
        size="small"
        (click)="visible_competencia = false"
      ></button>
    </div>
  </ng-template>
</p-dialog>
