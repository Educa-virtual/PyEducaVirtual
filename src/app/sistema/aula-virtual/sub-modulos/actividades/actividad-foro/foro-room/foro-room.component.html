<div class="flex justify-content-start">
    <p-breadcrumb class="max-w-full" [model]="items" [home]="home" />
</div>
<section class="flex flex-column gap-4">
    <p-tabView styleClass="actividad-tabs">
        <!-- Mostrar informacion general del foro -->
        <p-tabPanel>
            <ng-template pTemplate="header" class="header">
                <div class="flex align-items-center flex-column gap-2">
                    <app-icon name="matListAlt"></app-icon>
                    <span class="font-bold white-space-nowrap m-0">
                        Instrucciones
                    </span>
                </div>
            </ng-template>
            <app-toolbar-primeng
                [title]="
                    'Foro: ' + (foro?.cForoTitulo || 'Título no disponible')
                "
            >
            </app-toolbar-primeng>
            <p-card class="my-4 shadow-3 border-round surface-card">
                <div class="grid p-2">
                    <!-- Fecha de Inicio -->
                    <div class="col-12 md:col-4 mb-4">
                        <div
                            class="flex align-items-center gap-2 text-primary text-xl font-medium mb-2"
                        >
                            <app-icon
                                name="matCalendarMonth"
                                size="sm"
                            ></app-icon>
                            <span>Fecha de Inicio</span>
                        </div>
                        <div
                            class="text-base text-color-secondary line-height-3"
                        >
                            {{
                                foro?.dtForoInicio
                                    | date: "EEEE, d 'de' MMMM 'de' yyyy"
                            }}<br />
                            {{ foro?.dtForoInicio | date: 'h:mm a' }}
                        </div>
                    </div>

                    <!-- Fecha Fin -->
                    <div class="col-12 md:col-4 mb-4">
                        <div
                            class="flex align-items-center gap-2 text-primary text-xl font-medium mb-2"
                        >
                            <app-icon
                                name="matCalendarMonth"
                                size="sm"
                            ></app-icon>
                            <span>Fecha Fin</span>
                        </div>
                        <div
                            class="text-base text-color-secondary line-height-3"
                        >
                            {{
                                foro?.dtForoFin
                                    | date: "EEEE, d 'de' MMMM 'de' yyyy"
                            }}<br />
                            {{ foro?.dtForoFin | date: 'h:mm a' }}
                        </div>
                    </div>
                    <div class="col-12 md:col-4 mb-4">
                        <ng-content></ng-content>
                        <div
                            class="flex justify-content-center align-items-center"
                        >
                            @if (isDocente) {
                                @if (foro?.iEstado === '1') {
                                    <div
                                        class="border-1 border-orange-200 border-round bg-orange-50 p-3 text-center"
                                    >
                                        <span
                                            class="font-bold text-3xl text-orange-600"
                                            >BORRADOR</span
                                        >
                                    </div>
                                }
                                @if (foro?.iEstado === '2') {
                                    <div
                                        class="border-1 border-green-200 border-round bg-green-50 p-3 text-center"
                                    >
                                        <span
                                            class="font-bold text-3xl text-green-600"
                                            >PUBLICADO</span
                                        >
                                    </div>
                                }
                            }
                            @if (foro?.iEstado === '10') {
                                <div
                                    class="border-1 border-red-200 border-round bg-red-50 p-3 text-center"
                                >
                                    <span
                                        class="font-bold text-3xl text-red-600"
                                        >FINALIZADO</span
                                    >
                                </div>
                            }
                        </div>
                    </div>

                    <!-- Descripción -->
                    <div class="col-12 mt-2">
                        @if (isDocente) {
                            <div class="col-12 mt-2">
                                <div class="text-xl font-medium text-900 mb-2">
                                    Descripción de la Actividad
                                </div>
                                <div
                                    class="p-3 border-1 border-blue-200 border-round bg-blue-50 min-h-10rem"
                                >
                                    <div
                                        [innerHTML]="
                                            foro?.cForoDescripcion || '-'
                                        "
                                    ></div>
                                </div>
                            </div>
                        }
                        @if (iPerfilId === ESTUDIANTE) {
                            <div class="grid">
                                <div
                                    class="col-7 mt-2"
                                    [ngClass]="{
                                        'md:col-7': comentarioDocente !== null,
                                    }"
                                >
                                    <div
                                        class="text-xl font-medium text-900 mb-2"
                                    >
                                        Descripción de la Actividad
                                    </div>
                                    <div
                                        class="p-3 border-1 border-blue-200 border-round bg-blue-50 min-h-10rem"
                                    >
                                        <div
                                            [innerHTML]="
                                                foro?.cForoDescripcion || '-'
                                            "
                                        ></div>
                                    </div>
                                </div>
                                @if (comentarioDocente) {
                                    <div
                                        class="col-5 mt-5"
                                        [ngClass]="{
                                            'md:col-5':
                                                resptDocente?.length > 0,
                                        }"
                                    >
                                        <!-- <div
                                            class="card mt-2"
                                            *ngFor="
                                                let respuesta of comentarioDocente
                                            "
                                        > -->
                                        <h4>
                                            Mi Retroalimentación descriptiva:
                                        </h4>
                                        <p-divider></p-divider>
                                        <p-inputGroup>
                                            <p-inputGroupAddon>
                                                Comentario Docente:
                                            </p-inputGroupAddon>
                                            <!-- <textarea
                                                    pInputText
                                                    rows="1"
                                                    id="comentarioDocente"
                                                    pInputTextarea
                                                    rows="5"
                                                    [disabled]="isDisabled"
                                                    class=""
                                                    placeholder="Muestra Comentario Docente"
                                                >
                                                {{ respuesta?.cForoRptaDocente }} </textarea
                                                > -->
                                            <!-- [(ngModel)]="respuestaDocente" -->
                                            <textarea
                                                rows="5"
                                                cols="30"
                                                pInputTextarea
                                            >
                                                    {{
                                                    comentarioDocente
                                                        | removeHTML
                                                }}
                                                </textarea
                                            >
                                        </p-inputGroup>
                                        <!-- </div> -->
                                    </div>
                                }
                            </div>
                        }
                    </div>
                </div>
            </p-card>

            <!-- <app-descripcion-actividades
                [data]="foro"
                [isDocente]="isDocente"
            >
            </app-descripcion-actividades> -->

            <div class="flex flex-column my-4 gap-4">
                <!-- Mostrar recursos o meteriales para la actividad -->
                <article class="card">
                    <h2>Recursos:</h2>

                    <p-accordion>
                        <p-accordionTab header="Recursos Adjuntos">
                            <!-- Verifica si no hay archivos adjuntos -->
                            <ng-container
                                *ngIf="
                                    foro?.cForoUrl?.length === 0;
                                    else resourcesList
                                "
                            >
                                <app-empty-section
                                    class="w-full"
                                    [message]="'Sin recursos asignados'"
                                ></app-empty-section>
                            </ng-container>

                            <!-- Si hay recursos adjuntos -->
                            <ng-template #resourcesList>
                                <app-recursos-lista [files]="FilesTareas ?? []">
                                </app-recursos-lista>
                                <!-- <app-recursos-lista
                                [files]="
                                        evaluacion?.cEvaluacionArchivoAdjunto ??
                                        []
                                    "
                                    
                                >
                                </app-recursos-lista> -->
                            </ng-template>
                        </p-accordionTab>
                    </p-accordion>
                </article>
            </div>
        </p-tabPanel>
        <!-- Ver Comentarios de los Foros -->
        <p-tabPanel>
            <ng-template pTemplate="header">
                <div class="flex align-items-center flex-column gap-2">
                    <app-icon name="matRule"></app-icon>
                    <span class="font-bold white-space-nowrap m-0">
                        Ver Foro detalle
                    </span>
                </div>
            </ng-template>
            <app-foro-room-detalle
                *ngIf="foro"
                [dataForo]="foro"
                [ixActivadadId]="ixActivadadId"
                [iActTopId]="iActTopId"
                [iIeCursoId]="iIeCursoId"
                [iSeccionId]="iSeccionId"
                [iNivelGradoId]="iNivelGradoId"
            ></app-foro-room-detalle>
        </p-tabPanel>
    </p-tabView>
</section>

<p-menu #menu [model]="menuItems" [popup]="true"> </p-menu>
