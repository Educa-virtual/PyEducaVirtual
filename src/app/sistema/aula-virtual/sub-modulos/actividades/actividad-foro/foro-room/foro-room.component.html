<section class="flex flex-column gap-4">
    <p-tabView styleClass="actividad-tabs">
        <!-- Mostrar informacion general del foro -->
        <p-tabPanel>
            <ng-template pTemplate="header" class="header">
                <div class="flex align-items-center flex-column gap-2">
                    <app-icon name="matListAlt"></app-icon>
                    <span class="font-bold white-space-nowrap m-0">
                        Instrucciones
                    </span>
                </div>
            </ng-template>
            <div class="flex flex-column gap-4">
                <div class="card grid">
                    <div
                        [class]="iPerfilId === 8 ? 'col-12 md:col-8' : 'col-12'"
                    >
                        <article class="card">
                            <div class="TituloForo">
                                {{ foro?.cForoTitulo }}
                            </div>
                            <hr />

                            <div class="grid mb-4">
                                <div
                                    class="col-12 md:col-6 flex flex-column gap-2 align-items-start"
                                >
                                    <div
                                        class="col-12 md:col-6 gap-2 flex flex-column"
                                    >
                                        <span class="font-bold text-xl"
                                            >Catergoria:</span
                                        >
                                        {{ foro?.cForoCatDescripcion }}
                                    </div>
                                </div>
                            </div>
                            <div class="grid mb-4">
                                <div
                                    class="col-12 md:col-6 flex flex-column gap-2"
                                >
                                    <span class="font-bold text-xl flex gap-2">
                                        <app-icon
                                            name="matCalendarMonth"
                                            class="text-primary"
                                            size="sm"
                                        ></app-icon>
                                        Inicio de Foro:
                                    </span>
                                    <!-- {{ foro.dtForoInicio }} -->
                                    <p class="flex gap-2 flex-wrap">
                                        {{
                                            foro?.dtForoInicio
                                                | date
                                                    : "EEEE, d 'de' MMMM 'de' yyyy"
                                        }}

                                        <span class="flex gap-2">
                                            <app-icon
                                                name="matAccessTime"
                                                class="text-primary"
                                                size="sm"
                                            ></app-icon>
                                            <span class="font-bold"
                                                >Hora Limite:</span
                                            >
                                            {{
                                                foro?.dtForoInicio
                                                    | date: 'h:mm a'
                                            }}
                                        </span>
                                    </p>
                                </div>
                                <div
                                    class="col-12 md:col-6 flex flex-column gap-2"
                                >
                                    <span class="font-bold text-xl flex gap-2">
                                        <app-icon
                                            name="matCalendarMonth"
                                            class="text-primary"
                                            size="sm"
                                        ></app-icon>
                                        Cierre de Foro
                                    </span>
                                    <!-- {{ foro.dtForoFin }} -->
                                    <p class="flex gap-2 flex-wrap">
                                        {{
                                            foro?.dtForoFin
                                                | date
                                                    : "EEEE, d 'de' MMMM 'de' yyyy"
                                        }}

                                        <span class="flex gap-2">
                                            <app-icon
                                                name="matAccessTime"
                                                class="text-primary"
                                                size="sm"
                                            ></app-icon>
                                            <span class="font-bold"
                                                >Hora Limite:</span
                                            >
                                            {{
                                                foro?.dtForoFin | date: 'h:mm a'
                                            }}
                                        </span>
                                    </p>
                                </div>
                            </div>

                            <div
                                class="flex gap-2 flex-wrap align-items-center mb-4"
                            >
                                <app-icon
                                    name="matMessage"
                                    color="text-primary"
                                    size="sm"
                                />
                                <h3 class="text-lg m-0">Descripci√≥n:</h3>
                                {{ foro?.cForoDescripcion | removeHTML }}
                            </div>

                            <div
                                class="bg-gray-100 p-1 border-round min-h-10rem flex gap-2 flex-column"
                            ></div>
                        </article>
                    </div>
                    <div class="col-12 md:col-4" [hidden]="iPerfilId !== 8">
                        <div class="card">
                            <h4>Mi Nota</h4>
                            <p-divider></p-divider>
                            <p-inputGroup>
                                <p-inputGroupAddon> Nota </p-inputGroupAddon>
                                <input pInputText />
                            </p-inputGroup>
                            <p-divider></p-divider>
                            <p-inputGroup>
                                <p-inputGroupAddon>
                                    Comentario Docente
                                </p-inputGroupAddon>
                                <textarea pInputText rows="5"></textarea>
                            </p-inputGroup>
                        </div>
                    </div>
                </div>
                <article class="card">
                    <h2>Recursos:</h2>
                    <app-recursos-lista [files]="FilesTareas">
                    </app-recursos-lista>
                </article>
            </div>
        </p-tabPanel>
        <!-- Ver Comentarios de los Foros -->
        <p-tabPanel>
            <ng-template pTemplate="header">
                <div class="flex align-items-center flex-column gap-2">
                    <app-icon name="matRule"></app-icon>
                    <span class="font-bold white-space-nowrap m-0">
                        Ver Foro
                    </span>
                </div>
            </ng-template>
            <form
                [formGroup]="foroFormComntAl"
                class="flex flex-column gap-3 w-full"
            >
                <div class="flex flex-column gap-4">
                    <div class="card">
                        <div class="TituloForo">
                            {{ foro?.cForoTitulo }}
                        </div>
                        <hr />
                        <!-- <div class="TituloCurso">Nombre de curso:</div> -->
                        <div class="grid">
                            <div class="col-12 md:col-6 flex flex-column gap-2">
                                <p class="flex gap-2 flex-wrap">
                                    <app-icon
                                        name="matCalendarMonth"
                                        class="text-primary"
                                        size="sm"
                                    ></app-icon>
                                    {{
                                        foro?.dtForoInicio
                                            | date
                                                : "EEEE, d 'de' MMMM 'de' yyyy"
                                    }}
                                    <app-icon
                                        name="matAccessTime"
                                        class="text-primary"
                                        size="sm"
                                    ></app-icon>
                                    <span class="font-bold">Hora Limite:</span>
                                    <span class="flex gap-2">
                                        {{
                                            foro?.dtForoInicio | date: 'h:mm a'
                                        }}
                                    </span>
                                </p>
                            </div>
                            <div class="col-12 md:col-6 flex flex-column gap-2">
                                <p class="flex gap-2 flex-wrap">
                                    <app-icon
                                        name="matCalendarMonth"
                                        class="text-primary"
                                        size="sm"
                                    ></app-icon>
                                    {{
                                        foro?.dtForoFin
                                            | date
                                                : "EEEE, d 'de' MMMM 'de' yyyy"
                                    }}

                                    <span class="flex gap-2">
                                        <app-icon
                                            name="matAccessTime"
                                            class="text-primary"
                                            size="sm"
                                        ></app-icon>
                                        <span class="font-bold"
                                            >Hora Limite:</span
                                        >
                                        {{ foro?.dtForoFin | date: 'h:mm a' }}
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <p-messages
                        *ngIf="messages"
                        [(value)]="messages"
                        [enableService]="false"
                        [closable]="false"
                        class="custom-message"
                    />

                    <div class="">
                        <div class="card grid">
                            <!-- listar comentarios -->
                            <div
                                [class]="
                                    iPerfilId === 7
                                        ? 'col-12 md:col-8'
                                        : 'col-12'
                                "
                            >
                                <div class="pb-2">
                                    <label
                                        for=""
                                        class=""
                                        style="
                                            font-weight: bold;
                                            font-size: 16px;
                                        "
                                        >Chats:
                                    </label>
                                </div>
                                <p-orderList
                                    class="list"
                                    [value]="respuestasForo"
                                >
                                    <ng-template
                                        let-respuestas
                                        of
                                        comentarios
                                        pTemplate="listItem"
                                        let-i="index"
                                    >
                                        <!-- Agregar el length -->
                                        @if (1 > 0) {
                                            <p-button
                                                [text]="true"
                                                severity="secondary"
                                                class="btnContorno"
                                            >
                                                <div
                                                    class="perfiles-list-item text-left"
                                                    tabindex="0"
                                                    [class.highlight]="
                                                        respuestas.iEstudianteId ===
                                                        estudianteSelectComent
                                                    "
                                                >
                                                    <div
                                                        class="perfiles-list-detail"
                                                    >
                                                        <div class="flex">
                                                            <div>
                                                                <img
                                                                    src="assets/demo/images/matemit/user.png"
                                                                    [alt]="
                                                                        respuestas.name
                                                                    "
                                                                    class="w-3rem min-h-9 shadow-2 flex-shrink-0 btn"
                                                                />
                                                            </div>
                                                            <div>
                                                                <div
                                                                    class="pb-2 perfil-name"
                                                                >
                                                                    {{
                                                                        respuestas.cNombres
                                                                    }}
                                                                    {{
                                                                        respuestas?.dtCreado
                                                                            | date
                                                                                : 'short'
                                                                    }}
                                                                </div>
                                                                <div
                                                                    class=""
                                                                    style="
                                                                        text-align: justify;
                                                                    "
                                                                >
                                                                    <span
                                                                        *ngIf="
                                                                            !respuestas.expanded
                                                                        "
                                                                    >
                                                                        {{
                                                                            respuestas?.cForoRptaRespuesta
                                                                                | removeHTML
                                                                                | slice
                                                                                    : 0
                                                                                    : 150
                                                                        }}...
                                                                    </span>
                                                                    <span
                                                                        *ngIf="
                                                                            respuestas.expanded
                                                                        "
                                                                    >
                                                                        {{
                                                                            respuestas?.cForoRptaRespuesta
                                                                                | removeHTML
                                                                        }}
                                                                    </span>
                                                                    <!-- <a
                                                                        (click)="
                                                                            toggleExpand(
                                                                                respuestas
                                                                            )
                                                                        "
                                                                        class="toggle-link"
                                                                    >
                                                                        {{
                                                                            respuestas.expanded
                                                                                ? 'Leer menos'
                                                                                : 'Leer m√°s'
                                                                        }}
                                                                    </a> -->
                                                                </div>
                                                                <!-- startReply(i) -->

                                                                <div
                                                                    class="align-items-center"
                                                                >
                                                                    <button
                                                                        pButton
                                                                        type="button"
                                                                        class="p-button-text"
                                                                    >
                                                                        <i
                                                                            class="pi pi-thumbs-up"
                                                                            style="
                                                                                font-size: 18px;
                                                                            "
                                                                        ></i>
                                                                    </button>
                                                                    <button
                                                                        pButton
                                                                        type="button"
                                                                        class="p-button-text"
                                                                        (click)="
                                                                            startReply(
                                                                                i
                                                                            )
                                                                        "
                                                                    >
                                                                        <label
                                                                            for=""
                                                                            class="text-sm text-black pr-2"
                                                                            >{{
                                                                                respuestas
                                                                                    .json_respuestas_comentarios
                                                                                    .length ||
                                                                                    0
                                                                            }}
                                                                            Respuestas
                                                                        </label>
                                                                        <i
                                                                            class="pi pi-comments"
                                                                            style="
                                                                                font-size: 18px;
                                                                            "
                                                                        ></i>
                                                                    </button>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </p-button>
                                            <div
                                                class="ml-5"
                                                *ngIf="
                                                    selectedCommentIndex === i
                                                "
                                            >
                                                <p-button
                                                    [text]="true"
                                                    severity="secondary"
                                                    class="p-col-12 btCalificacion"
                                                >
                                                    <div
                                                        class="perfiles-list-item text-left"
                                                    >
                                                        <!-- Campo de respuesta y bot√≥n enviar -->
                                                        <div>
                                                            @for (
                                                                item of respuestas.json_respuestas_comentarios;
                                                                track item
                                                            ) {
                                                                <div
                                                                    class="flex mt-1 mb-1"
                                                                >
                                                                    <div>
                                                                        <img
                                                                            src="assets/demo/images/matemit/userA.png"
                                                                            [alt]="
                                                                                respuestas.name
                                                                            "
                                                                            class="w-3rem min-h-9 shadow-2 flex-shrink-0 btn"
                                                                        />
                                                                    </div>
                                                                    <div>
                                                                        <div
                                                                            class="pb-2 perfil-name"
                                                                        >
                                                                            {{
                                                                                item.cNombres
                                                                            }}

                                                                            {{
                                                                                item?.dtCreado
                                                                                    | date
                                                                                        : 'short'
                                                                            }}
                                                                        </div>
                                                                        <div
                                                                            [innerHTML]="
                                                                                item.cForoRptaRespuesta
                                                                            "
                                                                        ></div>
                                                                    </div>
                                                                    <br />
                                                                </div>
                                                                <hr />
                                                            }

                                                            <!-- <p-editor
                                                                id="descripcion"
                                                                placeholder="Comentar.."
                                                                formControlName="cForoRptaPadre"
                                                            /> -->
                                                            <div
                                                                class="comment-container-Rpd"
                                                            >
                                                                <input
                                                                    type="text"
                                                                    class="inputRpd"
                                                                    placeholder="Escribe un comentario..."
                                                                    id="commentText"
                                                                    formControlName="cForoRptaPadre"
                                                                />
                                                                <button
                                                                    pButton
                                                                    type="button"
                                                                    class="p-button-text"
                                                                    (click)="
                                                                        sendCommentPadre(
                                                                            respuestas
                                                                        )
                                                                    "
                                                                >
                                                                    <i
                                                                        class="pi pi-send"
                                                                        style="
                                                                            font-size: 20px;
                                                                        "
                                                                    ></i>
                                                                </button>
                                                                <p-button
                                                                    icon="pi pi-times"
                                                                    [rounded]="
                                                                        true
                                                                    "
                                                                    [text]="
                                                                        true
                                                                    "
                                                                    severity="secondary"
                                                                    (click)="
                                                                        cancelarEdicion()
                                                                    "
                                                                />
                                                            </div>
                                                            <!-- <div class="comment-container">
                                                                <input                                                                
                                                                    type="text"
                                                                    class="comment-input"
                                                                    placeholder="Escribe un comentario..."
                                                                    id="commentText"
                                                                    formControlName="cForoRptaPadre"
                                                                    
                                                                />                                                                                                                               
                                                                <div
                                                                    class="reply-container"
                                                                >
                                                                    <div
                                                                        class="button-container"
                                                                    >
                                                                        <button
                                                                            pButton
                                                                            pRipple
                                                                            label="Cancelar"
                                                                            icon="pi pi-times"
                                                                            class="p-button-secondary mx-3"
                                                                            type="button"
                                                                            size="small"
                                                                            (click)="
                                                                                cancelarEdicion()
                                                                            "
                                                                        ></button>
                                                                        <button
                                                                            pButton
                                                                            pRipple
                                                                            type="button"
                                                                            label="Responder Enviar"
                                                                            icon="pi pi-send"
                                                                            size="small"
                                                                            class="p-button-primary"
                                                                            (click)="
                                                                                sendCommentPadre(
                                                                                    respuestas
                                                                                )
                                                                            "
                                                                        ></button>
                                                                    </div>
                                                                </div>
                                                            </div> -->
                                                        </div>
                                                    </div>
                                                </p-button>
                                            </div>
                                        } @else {
                                            <app-empty-section
                                                class="w-full"
                                                [message]="'Ningun Comentario'"
                                            ></app-empty-section>
                                        }
                                    </ng-template>
                                </p-orderList>
                                <div class="comment-container">
                                    <input
                                        *ngIf="!showEditor"
                                        type="text"
                                        class="comment-input"
                                        placeholder="Escribe un comentario..."
                                        id="commentText"
                                        formControlName="cForoRptaRespuesta"
                                        (click)="toggleEditor()"
                                    />
                                    <div *ngIf="showEditor">
                                        <p-editor
                                            id="descripcion"
                                            placeholder="Escribe un Comentario... "
                                            formControlName="cForoRptaRespuesta"
                                        >
                                            <ng-template pTemplate="header">
                                                <span class="ql-formats">
                                                    <button
                                                        type="button"
                                                        class="ql-bold"
                                                        aria-label="Bold"
                                                    ></button>
                                                    <button
                                                        type="button"
                                                        class="ql-italic"
                                                        aria-label="Italic"
                                                    ></button>
                                                    <button
                                                        type="button"
                                                        class="ql-underline"
                                                        aria-label="Underline"
                                                    ></button>
                                                </span>
                                            </ng-template>
                                        </p-editor>

                                        <!-- <p-editor
                                            id="descripcion"
                                            placeholder="Escribe un Comentario... "
                                            formControlName="cForoRptaRespuesta"
                                        /> -->

                                        <div class="reply-container">
                                            <div class="button-container">
                                                <button
                                                    pButton
                                                    pRipple
                                                    label="Cancelar"
                                                    icon="pi pi-times"
                                                    class="p-button-secondary mx-3"
                                                    type="button"
                                                    size="small"
                                                    (click)="closeEditor()"
                                                ></button>
                                                <button
                                                    pButton
                                                    pRipple
                                                    type="button"
                                                    label="Enviar"
                                                    icon="pi pi-send"
                                                    size="small"
                                                    class="p-button-primary"
                                                    (click)="sendComment()"
                                                ></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- lista de participantes... -->
                            <div
                                class="col-12 md:col-4"
                                [hidden]="iPerfilId !== 7"
                            >
                                <div class="pb-2">
                                    <label
                                        for=""
                                        class=""
                                        style="
                                            font-weight: bold;
                                            font-size: 16px;
                                        "
                                        >Estudiantes:
                                    </label>
                                </div>
                                <p-orderList
                                    class="listAlumno"
                                    [value]="estudiantes"
                                    filterBy="nombrecompleto"
                                    filterPlaceholder="Buscar...."
                                >
                                    <ng-template
                                        let-estudiante
                                        of
                                        comentarios
                                        pTemplate="listItem"
                                        let-i="index"
                                    >
                                        <!-- <p-button
                                            [text]="true"
                                            severity="secondary"
                                            
                                        >
                                                
                                        </p-button> -->
                                        <div
                                            class="perfilesList"
                                            tabindex="0"
                                            (click)="
                                                selecEstudiante(
                                                    estudiante.iEstudianteId
                                                )
                                            "
                                            (keydown.enter)="
                                                selecEstudiante(
                                                    estudiante.iEstudianteId
                                                )
                                            "
                                            [class.selected]="
                                                estudianteSelectComent ===
                                                estudiante.iEstudianteId
                                            "
                                        >
                                            <img
                                                src="assets/demo/images/matemit/perfil.png"
                                                alt=""
                                                class="w-3rem btn"
                                            />
                                            <!--class="w-4rem min-h-9 shadow-2 flex-shrink-0 border-round"-->
                                            <div class="perfil-name">
                                                {{ estudiante?.nombrecompleto }}
                                            </div>
                                            <div
                                                class="btn-calificar-comentario"
                                            >
                                                <p-button
                                                    icon="pi pi-book"
                                                    [rounded]="true"
                                                    severity="danger"
                                                    (click)="
                                                        openModalCalificacion(
                                                            estudiante
                                                        )
                                                    "
                                                    tooltipPosition="bottom"
                                                    pTooltip="Calificar"
                                                />
                                            </div>
                                        </div>
                                    </ng-template>
                                </p-orderList>
                            </div>
                            <!-- <app-empty-section
                            class="w-full"
                            [message]="'Ningun Estudiante seleccionado'"
                        ></app-empty-section> -->
                        </div>
                    </div>
                </div>
            </form>
        </p-tabPanel>
        <!-- Calificar Foro -->
        @if (iPerfilId !== 8) {
            <p-tabPanel>
                <ng-template pTemplate="header">
                    <div class="flex align-items-center flex-column gap-2">
                        <app-icon name="matRule"></app-icon>
                        <span class="font-bold white-space-nowrap m-0">
                            Calificar Foro
                        </span>
                    </div>
                </ng-template>
                <form
                    [formGroup]="foroFormComnt"
                    class="flex flex-column gap-3 w-full"
                >
                    <!-- Cabecera del Foro -->
                    <div class="card">
                        <div class="TituloForo">
                            {{ foro?.cForoTitulo }}
                        </div>
                        <hr />
                        <!-- Mostrar las fechas de Inicio y fin de foro -->
                        <div class="grid">
                            <div class="col-12 md:col-6 flex flex-column gap-2">
                                <p class="flex gap-2 flex-wrap">
                                    <app-icon
                                        name="matCalendarMonth"
                                        class="text-primary"
                                        size="sm"
                                    ></app-icon>
                                    {{
                                        foro?.dtForoInicio
                                            | date
                                                : "EEEE, d 'de' MMMM 'de' yyyy"
                                    }}
                                    <app-icon
                                        name="matAccessTime"
                                        class="text-primary"
                                        size="sm"
                                    ></app-icon>
                                    <span class="font-bold">Hora Limite:</span>
                                    <span class="flex gap-2">
                                        {{
                                            foro?.dtForoInicio | date: 'h:mm a'
                                        }}
                                    </span>
                                </p>
                            </div>
                            <div class="col-12 md:col-6 flex flex-column gap-2">
                                <p class="flex gap-2 flex-wrap">
                                    <app-icon
                                        name="matCalendarMonth"
                                        class="text-primary"
                                        size="sm"
                                    ></app-icon>
                                    {{
                                        foro?.dtForoFin
                                            | date
                                                : "EEEE, d 'de' MMMM 'de' yyyy"
                                    }}

                                    <span class="flex gap-2">
                                        <app-icon
                                            name="matAccessTime"
                                            class="text-primary"
                                            size="sm"
                                        ></app-icon>
                                        <span class="font-bold"
                                            >Hora Limite:</span
                                        >
                                        {{ foro?.dtForoFin | date: 'h:mm a' }}
                                    </span>
                                </p>
                            </div>
                        </div>
                    </div>
                    <!-- Mostrar descripcion de Foro -->
                    <p-messages
                        [(value)]="messages"
                        [enableService]="false"
                        [closable]="false"
                    />
                    <!-- Mostrar las leyendas -->
                    <!-- <div class="flex gap-4 align-items-center flex-wrap mx-auto">
                        <app-leyenda
                            [total]="2"
                            text="Revisados"
                            [size]="'md'"
                            colorClass="bg-green-500"
                        ></app-leyenda>
                        <app-leyenda
                            [total]="3"
                            text="En proceso"
                            [size]="'md'"
                            colorClass="bg-yellow-500"
                        ></app-leyenda>
                        <app-leyenda
                            [total]="10"
                            text="Pendientes"
                            [size]="'md'"
                            colorClass="bg-red-500"
                        ></app-leyenda>
                    </div> -->
                    <!-- [(selection)]="evaluacionSeleccionada" (onRowSelect)="seleccionarEvaluacion()" -->
                    <!-- <div
                        class="flex flex-column gap-4 md:flex-row md:align-items-start align-items-stretch"
                    >
                    <div class="flex flex-column gap-2 card">
                        <div class="flex gap-4 align-items-center flex-wrap mx-auto">
                            <app-leyenda
                                [total]="2"
                                text="Revisados"
                                [size]="'md'"
                                colorClass="bg-green-500"
                            ></app-leyenda>
                            <app-leyenda
                                [total]="3"
                                text="En proceso"
                                [size]="'md'"
                                colorClass="bg-yellow-500"
                            ></app-leyenda>
                            <app-leyenda
                                [total]="10"
                                text="Pendientes"
                                [size]="'md'"
                                colorClass="bg-red-500"
                            ></app-leyenda>
                        </div>
                        <div class="w-full">
                            <p-iconField iconPosition="left" class="w-full">
                                <p-inputIcon styleClass="pi pi-search" />
                                <input
                                    type="text"
                                    pInputText
                                    placeholder="Search"
                                    class="w-full"
                                />
                            </p-iconField>
                        </div>
                        <p-table
                            [value]="respuestasForo"
                            selectionMode="single"
                        >
                            <ng-template pTemplate="header">
                                <tr>
                                    <th>#</th>
                                    <th>Nombre y Apellidos</th>
                                    <th>Estado</th>
                                    <th>Notal Final</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-respuestas
                                let-rowIndex = "rowIndex"
                                >
                                <tr>
                                    <td>
                                        {{rowIndex + 1}}
                                    </td>
                                    <td style="max-width: 150px; word-wrap: break-word;" >
                                        {{respuestas?.cNombreEstudiante}}
                                    </td>
                                    <td>
                                        <span
                                            class="block w-1rem h-1rem bg-red-500 border-circle"
                                        ></span>
                                    </td>
                                    <td></td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                    </div> -->
                    <!-- Mostrar tabla -->
                    <p-table
                        #dv
                        class="col-12 hoverTable"
                        [value]="estudiantes"
                        paginator="false"
                        styleClass="p-datatable-sm"
                    >
                        <ng-template pTemplate="header">
                            <tr>
                                <!-- incio -->
                                <p-table
                                    [value]="respuestasForo"
                                    [scrollable]="true"
                                    scrollHeight="500px"
                                >
                                    <ng-template pTemplate="header">
                                        <tr class="sticky-header">
                                            <th>#</th>
                                            <th>Nombre Estudiante</th>
                                            <th>Respuesta</th>
                                            <th>Calificaci√≥n</th>
                                            <th>Descripci√≥n</th>
                                            <th>Acciones</th>
                                        </tr>
                                    </ng-template>
                                    <ng-template
                                        pTemplate="body"
                                        let-respuestas
                                        let-rowIndex="rowIndex"
                                    >
                                        <tr>
                                            <td>
                                                <!-- <p-checkbox
                                                [(ngModel)]="estudiante.selected"
                                            ></p-checkbox> -->
                                                {{ rowIndex + 1 }}
                                            </td>
                                            <td class="">
                                                {{
                                                    respuestas?.cNombreEstudiante
                                                }}
                                            </td>
                                            <td
                                                class=""
                                                style="text-align: justify"
                                            >
                                                {{
                                                    respuestas?.cForoRptaRespuesta
                                                        | removeHTML
                                                }}
                                            </td>
                                            <td
                                                class="font-bold"
                                                style="text-align: center"
                                            >
                                                {{
                                                    respuestas?.cEscalaCalifNombre
                                                }}
                                            </td>
                                            <td>
                                                {{
                                                    respuestas?.cForoRptaDocente ??
                                                        '' | removeHTML
                                                }}
                                            </td>
                                            <td style="text-align: center">
                                                <p-button
                                                    icon="pi pi-book"
                                                    [rounded]="true"
                                                    [text]="true"
                                                    severity="secondary"
                                                    (click)="
                                                        openModal(respuestas)
                                                    "
                                                />
                                                <!-- <p-button
                                                    (click)="
                                                        openModal(respuestas)
                                                    "
                                                    class="btCalificacion"
                                                    icon="pi pi-book"
                                                    rounded="true"
                                                    severity="secondary"
                                                    [style]="{
                                                        'margin-right': '.5em',
                                                    }"
                                                /> -->

                                                <!-- <div
                                                class="w-1rem h-1rem border-circle ml-3"
                                                [ngClass]="
                                                    estudiante.cEstado === 'F'
                                                        ? 'bg-red-500'
                                                        : estudiante.cEstado === 'P'
                                                            ? 'bg-yellow-500'
                                                            : 'bg-green-500'
                                                "
                                            ></div> -->
                                            </td>
                                        </tr>
                                    </ng-template>
                                </p-table>
                                <!-- incio -->
                            </tr></ng-template
                        >
                        <ng-template pTemplate="emptymessage" let-columns>
                            <tr>
                                <td [attr.colspan]="8">
                                    No se encontraron resultados.
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                    <!-- <div class="card">
                        <app-table-primeng
                            [columnas]="columnas"
                            [data]="data"
                            (accionBtnItem)="accionBtnItemTable($event)"
                            [(selectedRowData)]="selectedItems"
                            [actions]="accionesTabla"
                        >
                            <ng-container slot="caption-content">
                            </ng-container>
                        </app-table-primeng>
                    </div> -->
                </form>
            </p-tabPanel>
        }
    </p-tabView>
</section>
<!-- Calificar estudiante en el mismo foro -->
<p-dialog
    [(visible)]="modelaCalificacionComen"
    [style]="{ width: '1000px' }"
    class="p-fluid"
    header="Calificar a: {{ perfilSelect?.nombrecompleto }}"
    [modal]="true"
>
    <form [formGroup]="foroFormComnt" class="flex flex-column gap-3 w-full">
        <div class="grid pt-2">
            <!-- Mostrar la califcaci√≥n -->
            <!--  for="calificacion" [options]="calificacion"-->
            <div class="col-12">
                <label class="font-bold" for="calificacion">Calificaci√≥n</label>
                <div class="pt-2">
                    <p-dropdown
                        [options]="calificacion"
                        formControlName="iEscalaCalifId"
                        styleClass="w-full"
                        optionValue="iEscalaCalifId"
                        optionLabel="cEscalaCalifNombre"
                        placeholder="Seleccione una Calificaci√≥n"
                        [showClear]="true"
                    />
                </div>
            </div>
            <!-- Mostrar descripci√≥n -->
            <div class="col-12">
                <label for="descripcion" class="font-bold mt-1"
                    >Descripci√≥n
                    <span class="text-red-500 text-xs"
                        >(*) Obligatorio</span
                    ></label
                >
                <div class="mt-2 pt-2">
                    <!-- <p-editor
                        id="descripcion"
                        formControlName="cForoRptaDocente"
                        [style]="{ height: '150px' }"
                    /> -->
                    <!-- <p-editor
                        [style]="{ height: '120px' }"
                        id="descripcion"
                        formControlName="cForoRptaDocente"
                    >
                        <ng-template pTemplate="header">
                            <span class="ql-formats">
                                <button
                                    type="button"
                                    class="ql-bold"
                                    aria-label="Bold"
                                ></button>
                                <button
                                    type="button"
                                    class="ql-italic"
                                    aria-label="Italic"
                                ></button>
                                <button
                                    type="button"
                                    class="ql-underline"
                                    aria-label="Underline"
                                ></button>
                            </span>
                        </ng-template>
                    </p-editor> -->
                    <p-editor
                        id="descripcion"
                        formControlName="cForoRptaDocente"
                        [style]="{ height: '150px' }"
                    />
                </div>
            </div>
        </div>
    </form>
    <div class="reply-container">
        <div class="button-container">
            <button
                pButton
                pRipple
                label="Cancelar"
                icon="pi pi-times"
                class="p-button-secondary mx-3"
                type="button"
                size="small"
                (click)="display = true"
            ></button>
            <button
                pButton
                pRipple
                type="button"
                label="Enviar"
                icon="pi pi-send"
                size="small"
                class="p-button-primary"
            ></button>
            <!-- (click)="submit()" -->
        </div>
    </div>
</p-dialog>
<p-dialog
    [(visible)]="modalCalificacion"
    [style]="{ width: '1000px' }"
    header="Calificar las Respuestas de: {{
        estudianteSelect?.cNombreEstudiante
    }}"
    [modal]="true"
    class="p-fluid"
>
    <form [formGroup]="foroFormComnt" class="flex flex-column gap-3 w-full">
        <div class="grid pt-3">
            <div class="col-8 flex flex-column gap-2 conntResp">
                <label for="" class="font-bold">Respuesta estudiante:</label>

                "{{ estudianteSelect?.cForoRptaRespuesta | removeHTML }}"
            </div>

            <div class="col-4 flex flex-column gap-2">
                <label for="calificacion">Calificaci√≥n</label>
                <p-dropdown
                    [options]="calificacion"
                    formControlName="iEscalaCalifId"
                    styleClass="w-full"
                    optionValue="iEscalaCalifId"
                    optionLabel="cEscalaCalifNombre"
                    placeholder="Seleccione una Calificaci√≥n"
                />
            </div>

            <div class="col-12">
                <label for="descripcion" class="mt-1"
                    >Descripci√≥n
                    <span class="text-red-500 text-xs"
                        >(*) Obligatorio</span
                    ></label
                >
                <div class="mt-2">
                    <p-editor
                        id="descripcion"
                        formControlName="cForoRptaDocente"
                        [style]="{ height: '150px' }"
                    />
                </div>
            </div>
        </div>
    </form>
    <!-- <div class="">
        
        flex justify-content-end gap-2 pt-3 
        <button
            pButton
            pRipple
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-secondary"
            type="button"
            
        ></button>
        (click)="closeModal(null)"
        <button
            pButton
            pRipple
            label="Guardar"
            icon="pi pi-check"
            
            class="p-button-primary"
            (click)="submit()"
        ></button>
    </div> -->
    <div class="reply-container">
        <div class="button-container">
            <button
                pButton
                pRipple
                type="button"
                label="Enviar"
                icon="pi pi-send"
                size="small"
                class="p-button-primary"
                (click)="submit()"
            ></button>
        </div>
    </div>
</p-dialog>
