<form [formGroup]="tareaForm" class="flex flex-column gap-3">
    <div class="grid">
        <div class="col-8 flex flex-column gap-2">
            <app-common-input [controlKey]="'cTareaTitulo'" label="Título" />

            <div class="flex flex-column gap-2">
                <label for="indicaciones">Descripción</label>
                <p-editor
                    id="cTareaDescripcion"
                    formControlName="cTareaDescripcion"
                />
            </div>

            <div class="flex flex-column gap-2">
                <label for="indicaciones">Indicaciones</label>
                <p-editor
                    id="indicaciones"
                    formControlName="cTareaIndicaciones"
                />
            </div>
            <div class="card flex flex-column gap-4">
                <p>Adjuntar</p>

                <div>
                    <p>{{ linkToShow }}</p>
                </div>
                <div class="flex grid">
                    <div class="col-6">
                        <app-file-upload-primeng
                            [nameFile]="'tareas'"
                            [nameOption]="'tareas'"
                            (actionFileUpload)="handleAction($event)"
                        >
                        </app-file-upload-primeng>
                        <ul *ngIf="FilesTareas.length">
                            <li *ngFor="let file of FilesTareas">
                                {{ file.name }}
                            </li>
                        </ul>
                    </div>
                    <div class="col-6">
                        <p-button
                            icon="pi pi-link"
                            label="Enlace"
                            class="p-button-primary mx-auto"
                            (onClick)="openLinkDialog()"
                        >
                        </p-button>
                    </div>
                </div>
            </div>
            <div class="card d-flex justify-content-center align-items-center">
                <p>Reutilizar Tarea</p>
                <div>
                    <button
                        pButton
                        type="button"
                        class="w-10"
                        style="width: 100vh"
                        label="Mostrar Tarea"
                        pi
                        pi-external-link
                        (click)="showModalDialog()"
                    ></button>
                </div>
            </div>
        </div>
        <div class="col-4">
            <!--<div class="field grid">
                <div class="field flex flex-column col-12 md:col-12">
                    <button
                        pButton
                        class="pi pi-users"
                        (click)="mostrarModal()"
                    >

                    </button>
                </div>
            </div>-->
            <!-- fecha hora de Inicio -->
            <div class="formgrid grid">
                <div class="field flex flex-column col-12 md:col-6">
                    <label for="dFechaEvaluacionPublicacion"
                        >Fecha de Inicio</label
                    >
                    <p-calendar
                        formControlName="dFechaEvaluacionPublicacionInicio"
                        [iconDisplay]="'input'"
                        styleClass="w-full"
                        [showIcon]="true"
                        inputId="dFechaEvaluacionPublicacionInicio"
                        [appendTo]="'body'"
                    />
                </div>
                <div class="field flex flex-column col-12 md:col-6">
                    <label for="tHoraEvaluacionPublicacionInicio"
                        >Hora de Inicio</label
                    >
                    <p-calendar
                        [timeOnly]="true"
                        styleClass="w-full"
                        [showIcon]="true"
                        iconDisplay="input"
                        formControlName="tHoraEvaluacionPublicacionInicio"
                        inputId="tHoraEvaluacionPublicacionInicio"
                        [appendTo]="'body'"
                    >
                        <ng-template
                            pTemplate="inputicon"
                            let-clickCallBack="clickCallBack"
                        >
                            <i class="pi pi-clock pointer-events-none"></i>
                        </ng-template>
                    </p-calendar>
                </div>
            </div>
            <br />

            <!-- fecha y hora fin -->
            <div class="formgrid grid">
                <div class="field flex flex-column col-12 md:col-6">
                    <label for="dFechaEvaluacionPublicacionFin"
                        >Fecha finalizacion</label
                    >
                    <p-calendar
                        formControlName="dFechaEvaluacionPublicacionFin"
                        [iconDisplay]="'input'"
                        styleClass="w-full"
                        [showIcon]="true"
                        inputId="dFechaEvaluacionPublicacionFin"
                        [appendTo]="'body'"
                    />
                </div>
                <div class="field flex flex-column col-12 md:col-6">
                    <label for="tHoraEvaluacionPublicacionFin"
                        >Hora finalizacion</label
                    >
                    <p-calendar
                        [timeOnly]="true"
                        styleClass="w-full"
                        [showIcon]="true"
                        iconDisplay="input"
                        formControlName="tHoraEvaluacionPublicacionFin"
                        inputId="tHoraEvaluacionPublicacionFin"
                        [appendTo]="'body'"
                    >
                        <ng-template
                            pTemplate="inputicon"
                            let-clickCallBack="clickCallBack"
                        >
                            <i class="pi pi-clock pointer-events-none"></i>
                        </ng-template>
                    </p-calendar>
                </div>
            </div>
            <br />
            <!--<div class="formgrid grid">
                 Columna para Nivel de logro -->
            <!--<div class="field col-12 md:col-6">
                    <label htmlFor="state">Nivel de logro</label>
                    <p-dropdown
                        [options]="niveldelogrosDropdownItems"
                        class="col-12"
                        optionLabel="name"
                        placeholder="Selecciona"
                    ></p-dropdown>
                </div>-->

            <!-- Columna para Puntaje -->
            <!--<div class="field col-12 md:col-6">
                    <label htmlFor="state">Puntaje</label>
                    <p-dropdown
                        [options]="puntajeArray"
                        class="col-12"
                        optionLabel="name"
                        placeholder="Selecciona"
                    ></p-dropdown>
                </div>
            </div>-->

            <!-- Columna para instrumentos de evalaucion -->
            <div class="flex justify-content-between gap-2 flex-wrap">
                <p>Instrumento de Evaluación</p>
                <app-file-upload-primeng
                    [nameFile]="'instrumentos'"
                    [nameOption]="'instrumentos'"
                    (actionFileUpload)="handleAction($event)"
                ></app-file-upload-primeng>

                <ul *ngIf="FilesInstrumentos.length">
                    <li *ngFor="let file of FilesInstrumentos">
                        {{ file.name }}
                    </li>
                </ul>
            </div>
        </div>
    </div>
</form>

<p-dialog
    header="Agregar Enlace"
    [(visible)]="linkDialogVisible"
    modal="modal"
    [draggable]="false"
>
    <div class="p-fluid">
        <div class="p-field p-mb-3">
            <input
                id="linkInput"
                pInputText
                type="text"
                placeholder="Ingrese el enlace"
                [(ngModel)]="link"
                class="p-inputtext p-component"
            />
        </div>

        <div class="p-field" style="margin-top: 15px">
            <!-- Espaciado extra aquí -->
            <button
                pButton
                label="Agregar"
                icon="pi pi-check"
                class="p-button-primary"
                (click)="addLink()"
            ></button>
        </div>
    </div>
</p-dialog>
<p-dialog
    header="Detalles de las Tareas"
    [(visible)]="displayModal"
    modal="true"
    [closable]="true"
    [style]="{ width: '1000px', height: '1000px' }"
>
    <div>
        <p-table [value]="estudiantes" [scrollable]="true" scrollHeight="500px">
            <ng-template pTemplate="header">
                <tr class="sticky-header">
                    <th>#</th>
                    <th>Título</th>
                    <th>Descripción</th>
                    <th>Acciones</th>
                </tr>
            </ng-template>
            <ng-template
                pTemplate="body"
                let-estudiante
                let-rowIndex="rowIndex"
            >
                <tr>
                    <!-- <td>
                        <p-checkbox
                            [(ngModel)]="estudiante.selected"
                        ></p-checkbox>
                    </td> -->
                    <td>{{ rowIndex + 1 }}</td>
                    <td>{{ estudiante.cPersNombre }}</td>
                    <td>
                        {{ estudiante.cPersPaterno }}
                    </td>
                    <td>
                        <p-button label="Usar" />
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</p-dialog>

<!--<p-dialog
    header="Asignar a"
    [(visible)]="displayModal"
    [modal]="true"
    [closable]="false"
    [draggable]="false"

>
     <div>
        <p-table [value]="estudiantes" scrollable="true" scrollHeight="200px">
            <ng-template pTemplate="header">
                <tr class="sticky-header">
                    <th></th>
                    <th>Nombres</th>
                    <th>Apellido Paterno</th>
                    <th>Apellido Materno</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-estudiante>
                <tr>
                    <td>
                        <p-checkbox
                            [(ngModel)]="estudiante.selected"
                        ></p-checkbox>
                    </td>
                    <td>{{ estudiante.cPersNombre }}</td>
                    <td>
                        {{ estudiante.cPersPaterno }}
                    </td>
                    <td>
                        {{ estudiante.cPersMaterno }}
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>-->
<!--<p-pickList
            sourceHeader="Lista de Estudiantes"
            targetHeader="Lista de Estudiantes"
            [dragdrop]="true"
            [responsive]="true"
            [sourceStyle]="{ height: '30rem' }"
            [targetStyle]="{ height: '30rem' }"
            filterBy="cIieeNombre"
            sourceFilterPlaceholder="Buscar por nombre"
            targetFilterPlaceholder="Buscar por nombre"
            [source]="estudiantes"
            showSourceControls="false"
            showTargetControls="false"

    >
        <ng-template let-estudiante pTemplate="item">


                    <span class="font-bold">
                        {{ estudiante.cPersNombre }}
                    </span>
                    <div class="flex align-products-center ">
                        <span>
                            {{ estudiante.cPersPaterno }}
                        </span>
                        <span>
                            {{ estudiante.cPersMaterno }}
                        </span>
                    </div>

        </ng-template>
</p-pickList>
    <footer>
        <div class="field flex">
            <div class="col text-left">
                <button
                    pButton
                    label="Cerrar"
                    class="p-button-label ql-color"
                    icon="pi pi-times"
                    (click)="cerrarModal()"
                ></button>
            </div>
            <div class="col text-right">
                <button
                    pButton
                    class="p-button-label ql-color"
                    label="Guardar"
                    icon="pi pi-save"
                    (click)="guardarDatos()"
                ></button>
            </div>
        </div>

    </footer>
    </p-dialog>-->
