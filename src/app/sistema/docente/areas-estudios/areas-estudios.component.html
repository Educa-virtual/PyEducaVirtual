<div class="grid card">
    <p-toolbar class="col-12">
        <div class="p-toolbar-group-start">
            <h4 class="text-primary font-bold">
                LISTA DE MIS ÁREAS CURRICULARES
            </h4>
        </div>
        <div class="p-toolbar-group-end">
            <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                    pInputText
                    placeholder="Buscar área curricular"
                    style="width: 350px"
                    (input)="onGlobalFilter(dt, $event)"
                />
            </span>
            <p-button
                icon="pi pi-sync"
                pTooltip="Refrescar áreas curriculares"
                tooltipPosition="top"
                [rounded]="true"
                [text]="true"
                severity="danger"
                (onClick)="getCursos()"
            />
        </div>
    </p-toolbar>
    <div class="col-12">
        <p-messages [(value)]="messages" [enableService]="false" />
    </div>
    <p-table
        #dt
        class="col-12 mx-2 hoverTable"
        [value]="data"
        paginator="true"
        [rows]="10"
        [globalFilterFields]="['cCurso']"
    >
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 1rem">#</th>
                <th style="width: 15rem">Nombre del Área Curricular</th>
                <th style="width: 2rem; text-align: center">
                    Total Estudiantes
                </th>
                <th style="width: 2rem; text-align: center">Grado</th>
                <th style="width: 2rem; text-align: center">Sección</th>
                <th style="width: 2rem; text-align: center">Avances %</th>
                <th style="width: 2rem; text-align: center">Acción</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
            <tr>
                <td class="justify-content-center">{{ rowIndex + 1 }}</td>
                <td class="font-bold">
                    {{ item.cCursoNombre }}
                </td>
                <td style="text-align: center">{{ item.iEstudiantes }}</td>
                <td style="text-align: center">{{ item.cGradoAbreviacion }}</td>
                <td style="text-align: center">{{ item.cSeccion }}</td>
                <td style="text-align: center">
                    <div class="align-items-center align-content-center">
                        <button
                            pButton
                            pRipple
                            class="p-1 ml-1 p-button-warning"
                        >
                            {{ item.iAvanceSilabo + '%' }}
                        </button>
                        <button
                            pButton
                            pRipple
                            class="p-1 ml-1 p-button-success"
                        >
                            {{ item.iAvanceAsistencia + '%' }}
                        </button>
                        <button
                            pButton
                            pRipple
                            class="p-1 ml-1 p-button-danger"
                        >
                            {{ item.iAvanceNotas + '%' }}
                        </button>
                    </div>
                </td>
                <td style="text-align: center">
                    <div class="align-items-center align-content-center">
                        <button
                            pTooltip="Gestionar Área Curricular"
                            [rounded]="true"
                            pButton
                            pRipple
                            class="p-1 p-button-rounded p-button-primary p-button-text"
                            (click)="
                                this.selectedData = item; menu.toggle($event)
                            "
                        >
                            <i class="pi pi-chevron-down"></i>
                        </button>
                        <button
                            pTooltip="Descargar Lista de Estudiantes"
                            tooltipPosition="top"
                            [rounded]="true"
                            pButton
                            pRipple
                            class="p-1 p-button-rounded p-button-success p-button-text"
                        >
                            <i class="pi pi-file-excel"></i>
                        </button>
                        <button
                            pTooltip="Descargar Programación Curricular"
                            tooltipPosition="top"
                            [rounded]="true"
                            pButton
                            pRipple
                            class="p-1 p-button-rounded p-button-danger p-button-text"
                            (click)="this.getSilaboPdf(item.iSilaboId)"
                        >
                            <i class="pi pi-file-pdf"></i>
                        </button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <div class="col-10 footer flex gap-2 my-2 mx-2">
        <p class="font-bold">Leyenda:</p>
        <!-- <p-tag value="Total de Estudiantes" /> -->
        <p-tag
            severity="warning"
            value="Avance de la Programación curricular"
        />
        <p-tag severity="success" value="Avance de Asistencia" />
        <p-tag severity="danger" value="Avance de Nivel de Logros" />
    </div>
</div>

<p-menu [style]="{ minWidth: '25rem' }" #menu [model]="items" [popup]="true" />
