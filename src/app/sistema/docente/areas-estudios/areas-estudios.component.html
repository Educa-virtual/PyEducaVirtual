<div class="grid card">
    <p-toolbar class="col-12">
        <div class="p-toolbar-group-start">
            <h4 class="text-primary font-bold">
                LISTA DE MIS ÁREAS CURRICULARES
            </h4>
        </div>
        <div class="p-toolbar-group-end">
            <span class="p-input-icon-left">
                <i class="pi pi-search"></i>
                <input
                    pInputText
                    placeholder="Buscar área curricular"
                    style="width: 350px"
                    (input)="onGlobalFilter(dt, $event)"
                />
            </span>
            <p-button
                icon="pi pi-sync"
                pTooltip="Refrescar áreas curriculares"
                tooltipPosition="top"
                [rounded]="true"
                [text]="true"
                severity="danger"
                (onClick)="getCursos()"
            />
        </div>
    </p-toolbar>
    <div class="col-12">
        <p-messages [(value)]="messages" [enableService]="false" />
    </div>
    <p-table
        #dt
        class="col-12 mx-2 hoverTable"
        [value]="data"
        paginator="true"
        [rows]="10"
        [globalFilterFields]="['cCurso']"
    >
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 1rem">#</th>
                <th style="width: 30rem">Nombre del Área Curricular</th>
                <th style="width: 2rem; text-align: center">Grado</th>
                <th style="width: 2rem; text-align: center">Sección</th>
                <th style="width: 1rem; text-align: center">Acción</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
            <tr>
                <td class="justify-content-center">{{ rowIndex + 1 }}</td>
                <td class="font-bold">
                    {{ item.cCursoNombre }}
                    <div class="flex gap-2 mt-1">
                        <p-tag [value]="item.iEstudiantes || 0 + ''" />
                        <p-tag
                            severity="warning"
                            [value]="item.iAvanceSilabo + '%'"
                        />
                        <p-tag
                            severity="success"
                            [value]="item.iAvanceAsistencia + '%'"
                        />
                        <p-tag
                            severity="danger"
                            [value]="item.iAvanceNotas + '%'"
                        />
                    </div>
                </td>
                <td style="text-align: center">{{ item.cGradoAbreviacion }}</td>
                <td style="text-align: center">{{ item.cSeccion }}</td>
                <td style="text-align: center">
                    <p-button
                        [rounded]="true"
                        [text]="true"
                        icon="pi pi-chevron-down"
                        (click)="showAndHideMenu(item, $event)"
                    ></p-button>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <div class="col-10 footer flex gap-2 my-2 mx-2">
        <p class="font-bold">Leyenda:</p>
        <p-tag value="Total de Estudiantes" />
        <p-tag
            severity="warning"
            value="Avance de la Programación curricular"
        />
        <p-tag severity="success" value="Avance de Asistencia" />
        <p-tag severity="danger" value="Avance de Nivel de Logros" />
    </div>
</div>

<p-menu
    [style]="{ minWidth: '25rem' }"
    #myMenu
    [model]="items"
    [popup]="true"
/>
