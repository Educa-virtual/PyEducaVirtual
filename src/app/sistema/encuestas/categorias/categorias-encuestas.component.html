<div class="categorias-container">
    <p-panel class="categoria-panel">
        <ng-template pTemplate="header">
            <div class="flex justify-content-between align-items-center w-full">
                <span class="text-xl font-bold text-primary">{{
                    titleEncuestasPorCategoria
                }}</span>
            </div>
        </ng-template>

        <!-- Search Bar -->
        <div class="flex align-items-center mb-4 gap-2">
            <span class="p-input-icon-left w-full">
                <i class="pi pi-search"></i>
                <input
                    type="text"
                    pInputText
                    (input)="onFilter($event)"
                    placeholder="Buscar categorÃ­as..."
                    class="w-full"
                />
            </span>
            <button
                pButton
                pRipple
                label="Nueva"
                icon="pi pi-plus"
                class="p-button-success"
                (click)="mostrarDialogNuevaCategoria = true"
            ></button>
        </div>

        <div class="categorias-grid">
            <div *ngFor="let categoria of categorias" class="categoria-item">
                <article
                    class="card p-0 border-1 flex flex-column surface-border overflow-hidden h-full post-module"
                >
                    <div class="curso__image-container img-transition">
                        <img
                            [src]="backend + '/' + categoria.cImagenUrl"
                            [alt]="categoria.cNombre"
                            class="w-full h-full"
                            (error)="updateUrl(categoria)"
                        />
                    </div>
                    <div class="p-3 mb-auto">
                        <h3 class="text-xl">
                            {{ categoria.cNombre | stringCase }}
                        </h3>
                    </div>
                    <footer
                        class="p-3 pt-0 flex align-items-center justify-content-between"
                    >
                        <p>
                            {{ categoria.iTotalEncuestas }}
                            {{
                                categoria.iTotalEncuestas === 1
                                    ? 'encuesta'
                                    : 'encuestas'
                            }}
                        </p>
                        <a
                            [routerLink]="[
                                '/encuestas/categorias',
                                categoria.iCategoriaEncuestaId,
                                'lista-encuestas',
                            ]"
                            style="color: white"
                            class="p-button p-component p-button-primary p-button-sm p-button-rounded"
                        >
                            Acceder
                        </a>
                    </footer>
                </article>
            </div>
        </div>
    </p-panel>
</div>

<app-nueva-categoria
    [(visible)]="mostrarDialogNuevaCategoria"
    (categoriaCreada)="onCategoriaCreada($event)"
></app-nueva-categoria>

<p-toast></p-toast>
