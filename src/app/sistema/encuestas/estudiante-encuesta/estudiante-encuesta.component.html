<p-panel>
    <ng-template pTemplate="header">
        <div class="flex justify-content-between align-items-center w-full">
            <span class="text-xl font-bold text-primary">{{ title }}</span>
            <button
                pButton
                pRipple
                label="Timer"
                icon="pi pi-plus"
                class="p-button-success"
            ></button>
        </div>
    </ng-template>

    <div class="grid">
        <div class="col-12 mb-3">
            <div class="flex justify-content-between align-items-center">
                <div>
                    <h5 class="m-0 text-uppercase">SECCIÓN 1:</h5>
                    <h5 class="m-0 text-uppercase">DATOS GENERALES</h5>
                </div>

                <div class="flex align-items-center gap-2">
                    <p-button
                        *ngFor="let pregunta of preguntas; let i = index"
                        (onClick)="seleccionarPregunta(i)"
                        [rounded]="true"
                        [label]="(i + 1).toString()"
                        styleClass="w-2rem h-2rem p-0 mx-1"
                        [outlined]="activeIndex !== i"
                        size="small"
                        [severity]="pregunta.iMarcado ? 'success' : 'primary'"
                    />
                </div>

                <div>
                    <p-button
                        label="Códigos.pdf"
                        size="small"
                        severity="danger"
                        icon="pi pi-file-pdf"
                    />
                </div>
            </div>
        </div>

        <div class="col-12">
            <p-accordion [activeIndex]="0">
                <div *ngFor="let pregunta of preguntas; let i = index">
                    <p-accordionTab
                        *ngIf="activeIndex === i"
                        [header]="pregunta.title"
                    >
                        <div [innerHTML]="pregunta.cPregunta"></div>
                        <ul class="list-none p-0">
                            <li
                                *ngFor="
                                    let alternativa of pregunta.alternativas
                                "
                                class="mb-2"
                            >
                                <p-checkbox
                                    [inputId]="alternativa.iAlternativaId"
                                    [(ngModel)]="alternativa.iMarcado"
                                    [binary]="true"
                                    [trueValue]="1"
                                    [falseValue]="0"
                                    (onChange)="
                                        guardarPregunta(
                                            pregunta.alternativas,
                                            alternativa
                                        )
                                    "
                                />
                                <label
                                    [for]="alternativa.iAlternativaId"
                                    class="ml-2"
                                >
                                    {{ alternativa.cAlternativaDescripcion }}
                                </label>
                            </li>
                        </ul>
                        <div class="bg-gray-100 p-3 mt-4 border-round">
                            <p class="m-0 font-semibold">Observación:</p>
                            <p class="m-0 text-sm">
                                Si la respuesta es "a" se le redirigirá a la
                                pregunta N° 16
                            </p>
                        </div>
                    </p-accordionTab>
                </div>
            </p-accordion>
        </div>
        <div class="col-12 flex justify-content-between mt-4">
            <p-button label="Anterior" severity="warning" />
            <p-button label="Siguiente" severity="success" />
        </div>
    </div>
</p-panel>
