<p-breadcrumb class="max-w-full" [model]="breadCrumbItems" [home]="breadCrumbHome" />
<app-container-page
  [title]="
    'Evaluación ERE: ' +
    (evaluacion?.cEvaluacionNombre || '-') +
    ' - ' +
    (evaluacion?.cCursoNombre || '-')
  "
  [subtitle]="
    'Nivel: ' +
    (evaluacion?.cNivelTipoNombre || '-') +
    ' | Grado: ' +
    (evaluacion?.cGradoAbreviacion || '-')
  "
  [actions]="[]"
>
  <!-- interface de Inicio -->
  <div class="grid" *ngIf="!iniciarEvaluacion">
    <div class="col-12 md:col-4 align-content-center">
      <div>
        <span class="font-bold text-xl flex gap-2">
          <app-icon name="matCalendarMonth" class="text-primary" size="sm"></app-icon>
          Fecha de evaluación:
        </span>
        <p class="flex gap-2 flex-wrap ml-5">
          {{ evaluacion?.dtExamenFechaInicio | date: 'EEEE, d MMMM, y' }}
        </p>
      </div>
      <div>
        <span class="font-bold text-xl flex gap-2 mt-2">
          <app-icon name="matCalendarMonth" class="text-primary" size="sm"></app-icon>
          Hora de evaluación:
        </span>
        <p class="flex gap-2 flex-wrap ml-5">
          De {{ evaluacion?.dtExamenFechaInicio | date: 'HH:mm' }} a
          {{ evaluacion?.dtExamenFechaFin | date: 'HH:mm' }}
        </p>
      </div>
      @if (bEstadoTiempo) {
        <div>
          <span class="font-bold text-xl flex gap-2 mt-2">
            <app-icon name="matCalendarMonth" class="text-primary" size="sm"></app-icon>
            Iniciar evaluación:
          </span>
          <p class="flex gap-2 flex-wrap ml-5">
            @if (evaluacion?.dtExamenFechaInicio) {
              <app-time
                [etiqueta]="'Empieza en'"
                [inicio]="evaluacion?.dtHoraActual"
                [fin]="evaluacion?.dtExamenFechaInicio"
                (accionTime)="accionBtnItem($event)"
              ></app-time>
            }
          </p>
        </div>
      }
    </div>

    <!-- tiempo de evaluación  -->
    <div class="col-12 md:col-3 align-content-center">
      <div class="flex flex-column gap-2">
        <span class="font-bold text-xl flex gap-2">
          <app-icon name="matCalendarMonth" class="text-primary" size="sm"></app-icon>
          Duración: {{ evaluacion?.tDuracion }} minutos
        </span>
        <p class="flex gap-2 flex-wrap ml-5">
          Cantidad de preguntas: {{ evaluacion?.totalPreguntas }}
        </p>
      </div>
    </div>

    <!-- Instrucciones del examen -->
    <div class="col-12 md:col-5 align-content-center">
      <div class="col text-center">
        <span class="font-bold text-xl"> Indicaciones </span>
      </div>
      <div class="backColor p-4 justificado">
        <p>
          A continuación, te presentamos 20 preguntas que debes responder correctamente. La
          respuesta correcta se encuentra en una de las 04 alternativas planteadas.
        </p>
        <p>Para ello:</p>
        <ol class="flex gap-2 flex-wrap">
          <li>LEE CADA PREGUNTA CON MUCHA ATENCIÓN.</li>
          <li>
            RECUERDA LEER TODO LO QUE OBSERVAS, SUBRAYA, MARCA O SUMILLA, TODO LO QUE CONSIDERES
            NECESARIO.
          </li>
          <li>SI ES NECESARIO, VUELVE A LEER LA PREGUNTA.</li>
          <li>PIENSA BIEN ANTES DE MARCAR UNA RESPUESTA.</li>
          <li>
            SI NO TIENES EL CUADERNILLO EN FÍSICO, UTILIZA UNA HOJA ADICIONAL PARA LA SOLUCIÓN DE
            TUS PROBLEMAS y LA ENTREGAS AL TERMINAR.(Área de matemática)
          </li>
          <li>SOLAMENTE DEBES MARCAR UNA ALTERNATIVA POR CADA PREGUNTA.</li>
          <li>MARCA TUS RESPUESTAS EN LA HOJA DE RESPUESTAS.</li>
        </ol>
      </div>
    </div>

    <div class="col-12 text-center">
      @if (bEstadoTiempo) {
        <button pButton pRipple type="button" class="p-button-secondary" [disabled]="bEstadoTiempo">
          <i class="pi pi-check-square"></i>&nbsp; Iniciar evaluación
        </button>
      } @else {
        <button
          pButton
          pRipple
          type="button"
          class="p-button-success pulse"
          (click)="rendirExamen()"
        >
          <i class="pi pi-check-square"></i>&nbsp; Iniciar evaluación
        </button>
      }
    </div>
  </div>
</app-container-page>
<p-toast></p-toast>
