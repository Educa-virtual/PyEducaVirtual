<div class="curso-table-wrapper">
  <table class="curso-table">
    <thead>
      <tr>
        <th style="width: 5%" class="text-center">#</th>
        <th class="text-center">√Årea curricular</th>
        <th style="width: 10%" class="text-center">Periodo 1</th>
        <th style="width: 10%" class="text-center">Periodo 2</th>
        <th style="width: 10%" class="text-center">Periodo 3</th>
        <th style="width: 10%" class="text-center">Periodo 4</th>
        <th style="width: 10%" class="text-center">Final</th>
        <th style="width: 5%"></th>
      </tr>
    </thead>
    <tbody>
      <ng-container *ngFor="let curso of courses; let i = index">
        <tr class="main-row">
          <td class="text-center">{{ i + 1 }}</td>
          <td class="text-center">{{ curso.cCursoNombre }}</td>
          <td colspan="5"></td>
          <td class="text-center">
            <button
              pButton
              type="button"
              [icon]="expanded[curso.iIeCursoId] ? 'pi pi-chevron-up' : 'pi pi-chevron-down'"
              (click)="toggle(curso.iIeCursoId)"
              class="p-button-rounded p-button-text p-button-plain"
              aria-label="expandir"
            ></button>
          </td>
        </tr>

        <tr
          class="expanded-row fondo-gris"
          *ngFor="let comp of curso.competencias; let j = index"
          [hidden]="!expanded[curso.iIeCursoId]"
        >
          <td></td>
          <td class="text-justify">
            <ol [start]="j + 1" type="a">
              <li>{{ comp.cCompetenciaNombre }}</li>
            </ol>
          </td>
          <td style="width: 11%" class="text-center">{{ comp.notas[0] }}</td>
          <td style="width: 11%" class="text-center">{{ comp.notas[1] }}</td>
          <td style="width: 11%" class="text-center">{{ comp.notas[2] }}</td>
          <td style="width: 11%" class="text-center">{{ comp.notas[3] }}</td>
          <td style="width: 11%" class="text-center">{{ comp.notas[4] }}</td>
          <td></td>
        </tr>
      </ng-container>
    </tbody>
  </table>
</div>
<div
  class="mt-4 flex justify-content-end w-full"
  *ngIf="vista === 'estudiante' || vista === 'apoderado'"
>
  <button
    pButton
    pRipple
    pTooltip="Descargar reporte"
    tooltipPosition="top"
    class="p-button-danger"
    (click)="vista === 'estudiante' ? descargarReporteEstudiante() : descargarReporteApoderado()"
  >
    <i class="pi pi-download"></i>
    <span class="ml-2 hidden sm:block">Descargar reporte</span>
  </button>
</div>
