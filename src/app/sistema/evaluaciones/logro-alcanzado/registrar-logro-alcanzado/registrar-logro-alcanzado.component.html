<br />
<div>
  <p-inputGroup>
    <p-inputGroupAddon> ÁREA: </p-inputGroupAddon>
    <input
      class="disabled"
      disabled
      type="text"
      pInputText
      [value]="selectedItem?.[0]?.cCursoNombre ?? 'sin area seleccionada'"
    />
  </p-inputGroup>
</div>

<div class="field col-12">
  <p-table
    [value]="competencias"
    [scrollable]="true"
    scrollDirection="horizontal"
    [style]="{ 'min-width': '1200px' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th rowspan="2" pFrozenColumn>Competencias</th>
        <th colspan="2">Primer Periodo</th>
        <th colspan="2">Segundo Periodo</th>
        <th colspan="2">Tercer Periodo</th>
        <th colspan="2">Cuarto Periodo</th>
      </tr>
      <tr>
        <th>NL</th>
        <th>Conclusión descriptiva</th>
        <th>NL</th>
        <th>Conclusión descriptiva</th>
        <th>NL</th>
        <th>Conclusión descriptiva</th>
        <th>NL</th>
        <th>Conclusión descriptiva</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-competencias let-i="rowIndex">
      <tr>
        <td pFrozenColumn>{{ competencias.cCompetenciaNombre }}</td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="competencias.cNivelLogro_1"
            name="mat_{{ i }}_b1_nl"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="competencias.cDescripcion_1"
            name="mat_{{ i }}_b1_desc"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="competencias.cNivelLogro_2"
            name="mat_{{ i }}_b2_nl"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="competencias.cDescripcion_2"
            name="mat_{{ i }}_b2_desc"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="competencias.cNivelLogro_3"
            name="mat_{{ i }}_b3_nl"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="competencias.cDescripcion_3"
            name="mat_{{ i }}_b3_desc"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="competencias.cNivelLogro_4"
            name="mat_{{ i }}_b4_nl"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="competencias.cDescripcion_4"
            name="mat_{{ i }}_b4_desc"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
      </tr>
    </ng-template>

    <ng-template pTemplate="footer">
      <tr>
        <td pFrozenColumn style="font-weight: bold">Promedio final del periodo</td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="iCalifIdPeriodo1"
            name="iCalifIdPeriodo1"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="cDetMatrConclusionDesc1"
            name="cDetMatrConclusionDesc1"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="iCalifIdPeriodo2"
            name="iCalifIdPeriodo2"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="cDetMatrConclusionDesc2"
            name="cDetMatrConclusionDesc2"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="iCalifIdPeriodo3"
            name="iCalifIdPeriodo3"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="cDetMatrConclusionDesc3"
            name="cDetMatrConclusionDesc3"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="iCalifIdPeriodo4"
            name="iCalifIdPeriodo4"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <textarea
            pInputTextarea
            [(ngModel)]="cDetMatrConclusionDesc4"
            name="cDetMatrConclusionDesc4"
            rows="2"
            style="width: 115px"
          ></textarea>
        </td>
      </tr>
      <tr>
        <td pFrozenColumn style="font-weight: bold">Resultado final de todos los periodos</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td>
          <input
            type="text"
            pInputText
            [(ngModel)]="iPromedio"
            name="iPromedio"
            style="width: 60px"
            (input)="onlyNumbers($event)"
          />
        </td>
        <td>
          <input
            type="text"
            pInputTextarea
            style="width: 115px"
            [(ngModel)]="cDetMatrConclusionDescPromedio"
            (input)="onlyNumbers($event)"
          />
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>

<!-- Botones -->
<div class="field col-12">
  <div class="flex justify-content-end gap-2">
    <p-button label="Cancelar" severity="secondary" (click)="cerrarDialog()"></p-button>
    <p-button
      *ngIf="!mostrarBotonFinalizar"
      label="Guardar"
      severity="primary"
      (click)="guardarLogro()"
    ></p-button>
    <p-button
      *ngIf="mostrarBotonFinalizar"
      label="Finalizar"
      severity="success"
      (click)="finalizarRegistro()"
    ></p-button>
  </div>
</div>

<p-toast></p-toast>
