<div class="flex flex-column gap-2">
    <form [formGroup]="formAsignarMatriz">
        <div class="formgrid grid gap-4">
            <div class="flex flex-column col-12 gap-2">
                <label for="competencia">Competencias</label>
                <p-dropdown
                    styleClass="w-full"
                    optionValue="iCompentenciaId"
                    formControlName="iCompentenciaId"
                    [options]="competencias"
                    optionLabel="cCompetenciaDescripcion"
                    [ngClass]="{
                        'ng-dirty ng-invalid':
                            formAsignarMatriz.get('iCompentenciaId')?.errors &&
                            formAsignarMatriz.get('iCompentenciaId')?.touched,
                    }"
                />
                <small>
                    @if (
                        formAsignarMatriz
                            .get('iCompentenciaId')
                            .hasError('required') &&
                        formAsignarMatriz.get('iCompentenciaId')?.touched
                    ) {
                        <span class="text-red-500">
                            Este campo es requerido
                        </span>
                    }
                </small>
            </div>
            <div class="flex flex-column col-12 gap-2">
                <label for="competencia">Capacidades</label>
                <p-dropdown
                    optionValue="iCapacidadId"
                    formControlName="iCapacidadId"
                    styleClass="w-full"
                    [options]="capacidades"
                    optionLabel="cCompetenciaDescripcion"
                    [ngClass]="{
                        'ng-dirty ng-invalid':
                            formAsignarMatriz.get('iCapacidadId')?.errors &&
                            formAsignarMatriz.get('iCapacidadId')?.touched,
                    }"
                />
                <small>
                    @if (
                        formAsignarMatriz
                            .get('iCapacidadId')
                            .hasError('required') &&
                        formAsignarMatriz.get('iCapacidadId')?.touched
                    ) {
                        <span class="text-red-500">
                            Este campo es requerido
                        </span>
                    }
                </small>
            </div>
            <div class="flex flex-column col-12 gap-2">
                <label for="competencia">Desempe√±os</label>
                <p-dropdown
                    styleClass="w-full"
                    optionValue="iDesempenoId"
                    formControlName="iDesempenoId"
                    [options]="desempenos"
                    optionLabel="cCompetenciaDescripcion"
                    [ngClass]="{
                        'ng-dirty ng-invalid':
                            formAsignarMatriz.get('iDesempenoId')?.errors &&
                            formAsignarMatriz.get('iDesempenoId')?.touched,
                    }"
                />
                <small>
                    @if (
                        formAsignarMatriz
                            .get('iDesempenoId')
                            .hasError('required') &&
                        formAsignarMatriz.get('iDesempenoId')?.touched
                    ) {
                        <span class="text-red-500">
                            Este campo es requerido
                        </span>
                    }
                </small>
            </div>
        </div>
    </form>

    <h2 class="text-xl">Preguntas Seleccionadas</h2>

    <app-table-primeng
        [showCaption]="false"
        [data]="preguntas"
        [columnas]="columnas"
        [selectedRowData]="preguntas"
        (selectedItems)="setSelectedItems($event)"
    />

    <footer class="flex justify-content-end gap-2 pt-3">
        <button
            pButton
            pRipple
            label="Cancelar"
            icon="pi pi-times"
            class="p-button-secondary"
            type="button"
            size="small"
            (click)="closeModal(null)"
        ></button>
        <button
            pButton
            pRipple
            label="Guardar"
            icon="pi pi-save"
            size="small"
            class="p-button-primary"
            (click)="asignarMatrizPreguntas()"
        ></button>
    </footer>
</div>
