<form [formGroup]="form">
    <div class="grid p-fluid mt-3">
        <div class="field col-12 md:col-6">
            <span class="p-float-label">
                <p-multiSelect
                    [options]="destinos"
                    formControlName="iDestinoId"
                    optionLabel="nombre"
                    optionValue="id"
                    [showClear]="true"
                    display="chip"
                    [filter]="true"
                    [appendTo]="'body'"
                    [style]="{ flex: '1', width: '100%' }"
                />
                <label for="iDestinoId">Destino</label>
            </span>
        </div>
        <div class="field col-12 md:col-6">
            <p-inputGroup>
                <p-inputGroupAddon>Prioridad *</p-inputGroupAddon>
                <p-dropdown
                    [options]="prioridades"
                    formControlName="iPrioridadId"
                    optionLabel="nombre"
                    [checkmark]="true"
                    optionValue="id"
                    [showClear]="true"
                    [filter]="true"
                    [appendTo]="'body'"
                />
            </p-inputGroup>
        </div>
        <div class="field col-12">
            <p-inputGroup>
                <p-inputGroupAddon>Asunto *</p-inputGroupAddon>
                <input pInputText type="text" formControlName="cAsunto" />
            </p-inputGroup>
        </div>
        <div class="field col-12">
            <p-editor
                formControlName="cSugerencia"
                [style]="{ height: '150px' }"
                placeholder="Explique su sugerencia *"
                [readonly]="disable_form"
            />
        </div>
        @if (disable_form) {
            <div class="field col-12">
                <a
                    href="#"
                    class="p-button-link p-button-text mr-2"
                    target="_blank"
                >
                    <p-chip>
                        <span
                            class="bg-primary border-circle w-2rem h-2rem flex align-items-center justify-content-center"
                        >
                            <i class="pi pi-file"></i>
                        </span>
                        <span class="ml-2"> Mi_sugerencia_2023.pdf </span>
                    </p-chip>
                </a>
                <a
                    href="#"
                    class="p-button-link p-button-text mx-2"
                    target="_blank"
                >
                    <p-chip>
                        <span
                            class="bg-primary border-circle w-2rem h-2rem flex align-items-center justify-content-center"
                        >
                            <i class="pi pi-file"></i>
                        </span>
                        <span class="ml-2"> Foto_adjunta_20230101.jpg </span>
                    </p-chip>
                </a>
            </div>
        } @else {
            <div class="field col-12">
                <p-fileUpload
                    name="demo[]"
                    showUploadButton="false"
                    [multiple]="true"
                    chooseLabel="Seleccione hasta 3 archivos (max. 10 MB)"
                    cancelLabel="Quitar archivos"
                    fileLimit="3"
                    maxFileSize="10240000"
                >
                    <ng-template pTemplate="content">
                        <ul *ngIf="uploadedFiles.length">
                            <li *ngFor="let file of uploadedFiles">
                                {{ file.name }} - {{ file.size }} bytes
                            </li>
                        </ul>
                    </ng-template>
                </p-fileUpload>
            </div>
        }
    </div>
    <div class="flex justify-content-end" *ngIf="!disable_form">
        <p-button
            label="Guardar"
            (onClick)="guardarSugerencia()"
            severity="success"
            [disabled]="form.invalid"
            [hidden]="sugerencia_registrada"
        />
        <p-button
            label="Actualizar"
            (onClick)="actualizarSugerencia()"
            severity="success"
            [disabled]="form.invalid"
            [hidden]="!sugerencia_registrada"
        />
    </div>
</form>
