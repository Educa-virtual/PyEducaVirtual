<div class="user-management-container">
    <div class="header">
        <h1>Gestión de Usuarios</h1>
    </div>

    <div class="search-section">
        <div class="search-header">
            <span class="search-title">Búsqueda de Usuario</span>
        </div>

        <div class="search-content">
            <div class="search-criteria">
                <label for="searchInput">Buscar por:</label>
                <div class="search-fields">
                    <p-dropdown
                        [options]="searchTypes"
                        [(ngModel)]="selectedSearchType"
                        optionLabel="name"
                        styleClass="search-dropdown"
                    ></p-dropdown>
                    <span class="p-input-icon-right">
                        <input
                            type="text"
                            pInputText
                            [(ngModel)]="searchText"
                            placeholder="Escriba su búsqueda"
                        />
                    </span>
                </div>
            </div>

            <div class="filter-criteria">
                <div class="filter-fields">
                    <p-dropdown
                        [options]="filterOptions"
                        [(ngModel)]="selectedFilter"
                        optionLabel="name"
                        styleClass="filter-dropdown"
                    ></p-dropdown>
                    <p-dropdown
                        [options]="statusOptions"
                        [(ngModel)]="selectedStatusFilter"
                        optionLabel="name"
                        styleClass="status-dropdown"
                    ></p-dropdown>
                    <button
                        pButton
                        type="button"
                        label="Agregar Nuevo"
                        icon="pi pi-plus"
                        class="p-button-success add-button"
                        (click)="agregarNuevoUsuario()"
                    ></button>
                </div>
            </div>
        </div>
    </div>

    <p-table [value]="usuarios" styleClass="user-table">
        <ng-template pTemplate="header">
            <tr>
                <th class="text-center">N°</th>
                <th>Documento</th>
                <th>Rol</th>
                <th>Apellidos y Nombres</th>
                <th>Nombre de la Institución</th>
                <th class="text-center">Acciones</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-usuario let-i="rowIndex">
            <tr>
                <td class="text-center">{{ i + 1 }}</td>
                <td>{{ usuario.documento }}</td>
                <td>{{ usuario.rol }}</td>
                <td>{{ usuario.apellidosNombres }}</td>
                <td>{{ usuario.institucion }}</td>
                <td class="text-center action-buttons">
                    <button
                        pButton
                        icon="pi pi-pencil"
                        aria-label="Editar usuario"
                        (click)="editarUsuario(usuario)"
                        (keydown.enter)="editarUsuario(usuario)"
                    ></button>

                    <button
                        pButton
                        icon="pi pi-user"
                        aria-label="Ver usuario"
                        (click)="verUsuario(usuario)"
                        (keydown.enter)="verUsuario(usuario)"
                    ></button>

                    <button
                        pButton
                        icon="pi pi-trash"
                        aria-label="Eliminar usuario"
                        class="p-button-danger"
                        (click)="eliminarUsuario(usuario)"
                        (click)="eliminarUsuario(usuario)"
                    ></button>
                </td>
            </tr>
        </ng-template>
    </p-table>

    <!-- Tabla de usuarios 
  <p-table [value]="usuarios" styleClass="user-table" [tableStyle]="{'min-width': '100%'}">
    <ng-template pTemplate="header">
      <tr>
        <th class="text-center">N°</th>
        <th>Documento</th>
        <th>Rol</th>
        <th>Apellidos y Nombres</th>
        <th>Nombre de la Institución</th>
        <th class="text-center">Acciones</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-usuario let-i="rowIndex">
      <tr>
        <td class="text-center">{{ i + 1 }}</td>
        <td>{{ usuario.documento }}</td>
        <td>{{ usuario.rol }}</td>
        <td>{{ usuario.apellidosNombres }}</td>
        <td>{{ usuario.institucion }}</td>

        <td class="text-center action-buttons">
          <button pButton  [label]="'Editar'" class="p-button-rounded p-button-warning action-btn"
            pTooltip="Editar" tooltipPosition="top" (click)="editarUsuario(usuario)"></button>

          <button pButton icon="pi pi-user" size="small" class="p-button-info action-btn" 
          title="Mostrar todos los usuarios"  (click)="verUsuario(usuario)"></button>

          <button pButton pRipple icon="pi pi-times" class="p-button-rounded p-button-danger action-btn"
            pTooltip="Eliminar" tooltipPosition="top" (click)="eliminarUsuario(usuario)"></button>
        </td>
      </tr>
    </ng-template>
  </p-table>
  -->

    <div class="pagination-container">
        <p-paginator
            [rows]="10"
            [totalRecords]="100"
            [rowsPerPageOptions]="[10, 20, 30]"
            [showCurrentPageReport]="true"
            [showJumpToPageDropdown]="true"
        >
        </p-paginator>
    </div>
</div>
